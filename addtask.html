<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css" type="text/css">
      <link rel="stylesheet" href="css/footer.css" type="text/css">
            <link rel="stylesheet" href="css/animate.css" type="text/css" />
              	    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">   
    <title>Add Task</title>
  </head>
  <body>
          <header>
   
   <nav class="navbar navbar-expand-lg navbar-light bg-light pt-3">
  <a class="navbar-brand pl-2" href="index.html">Abhi</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item ">
        <a class="nav-link" href="index.html"><i class="fa fa-bar-chart pr-1" aria-hidden="true"></i> Dashboard </a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="#"><i class="fa fa-plus pr-2 pl-1" aria-hidden="true"></i> Add Task </a>
      </li>
      <li class="nav-item ">
        <a class="nav-link" href="viewtask.html"><i class="fa fa-tasks pr-2" aria-hidden="true"></i> View Task </a>
      </li>
     
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-info my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>
   </header>
   
   <section  class="addtask bg-light pb-3">
   	<div class="container-fluid">
   	     <div class="row">
   	          <div class="col-md-6 col-12 pb-2 ">
   	                <img class="img-fluid" src="img/addtask.png" />
   	
                  </div>
   	           <div class="col-md-6 col-12 pt-3 pb-3">
   	                <h3 class="pb-3"> Add Task </h3>
              
   	                
   	                       <form name="addtask" onsubmit="return( addTask());">
  <div class="form-group">
    <label for="taskName">Task Name</label>
    <input type="text" class="form-control bg-light" id="taskName" name="taskName" placeholder="Enter task name" required autocomplete="off">
  </div>
  <div class="form-group">
    <label for="priority">Priority</label>
    <select class="form-control bg-light " id="priority">
      <option value="1">Normal</option>
      
      <option value="2">Important</option>
      
      <option value="3">Urgent</option>
    </select>
  </div>
  <div class="form-group">
    <label for="deadline">Deadline</label>
   <input type="date" class="form-control bg-light " id="deadline" required>
  </div>
  <div class="form-group">
    <label for="description">Description</label>
    <textarea class="form-control bg-light" id="description" rows="3"></textarea>
  </div>
  <button type="submit" class="btn btn-info">Add task</button>
</form>
                       </div>
                  </div>
   	    </div>
       </div>
   </section>
      
      <footer>
             <div class="container-fluid footer">
                    <div class="row up-area">
                    	<div class="col-md-3 col-12 menu">
                    	       <h3> Application Menu </h3>
                               <nav class="nav flex-column">
  <a class="nav-link" href="index.html"><i class="fa fa-bar-chart pr-1"></i> Dashboard</a>
  <a class="nav-link" href="addtask.html"><i class="fa fa-plus pr-2 pl-1"></i> Add Task</a>
  <a class="nav-link" href="viewtask.html"><i class="fa fa-tasks pr-2"></i> View Task</a>
    
</nav>
                    	</div>
                    
          
                        <div class="col-md-4 col-12 contact ">
                        	<h3> Connect Us </h3>
                                <nav class="nav flex-column">
                                       <a class="nav-link" href="#"><i class="fa fa-envelope"></i> iamabhishekjaiswal01@gmail.com</a>
                                </nav>
                       <div class="social">
<ul>
<li><a href="#" class="fa fa-2x fa-facebook"></a></li>
<li><a href="#" class="fa fa-2x fa-github"></a></li>
<li><a href="#"  class="fa fa-2x fa-instagram"></a></li>
<li><a href="#" class="fa fa-2x fa-google"></a></li>
</ul>
</div>

   	</div>
                    
                    
                    
                    
                    
                        
                        
                        
                      </div>          
             
 
                    
                    
                    <div class="row  justify-content-center">
                    	<div class="col-11 bg-light divider">
                    	</div>
                    
                    </div>
                    
                    <div class="row down-area justify-content-center">
                          <div class="col-md-6 col-12 p-1"> 
                               <a><i class="fa fa-copyright"></i>   <b  class="brandname">  Abhi </b>  </a>
                          </div>
                          <div class="col-md-6 col-12 p-1">
                               <a> Developed with <i class="fa fa-heart"></i>  : Abhishek Jaiswal </a>
                          </div>
                    </div>
                    
             </div>
             </div>
       </footer>
     

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
    -->
    	<script src="js/app.js"> </script>
    	<script>
    	    var taskData={ };

    	    function addTask( ){
    	       
    	       taskData.taskName=document.addtask.taskName.value;
               taskData.taskStart=getCurrentDate();
               taskData.taskDeadline=document.addtask.deadline.value;
               if(validateDeadline(taskData.taskDeadline)){
               	
               }
               else{
               alert('Deadline cannot be previous date!');
               return false;
               }
               taskData.priority=document.addtask.priority.value;
               taskData.dayleft=calculateDay(taskData);
          
               taskData.status="pending";
               taskData.discription=document.addtask.description.value;
               if (localStorage.getItem("task") === null) 
               var task=[ ];
               else
               var task=JSON.parse(localStorage.getItem('task'));
                               
              task.push(taskData);
              pointOnAdd(taskData);
              
            
              localStorage.setItem("task",JSON.stringify(task));
              
             
       
              alert('Task added successfully ! ');
             return true;
          }
          
          function validateDeadline(n){
          	
          	var deadline=n.split('-');
              
          	var todayDate=getCurrentDate().split('-');
             
              if(parseInt(deadline[0])<parseInt(todayDate[0]))
              return false;
              else if(parseInt(deadline[1])<parseInt(todayDate[1])&&parseInt(deadline[0])===parseInt(todayDate[0])) 
              return false;
              else if(parseInt(deadline[2])<parseInt(todayDate[2])&&parseInt(deadline[1])===parseInt(todayDate[1])&&parseInt(deadline[0])===parseInt(todayDate[0]))
              return false;
              else
              return true;
          }
          
          function pointOnAdd(taskdata){
          	if (localStorage.getItem("pointOnAdd") === null) {
               var pointOnAdd={};
               pointOnAdd.numberOfTask=0;
               pointOnAdd.addPointPercentage=0;
               }
               else
               var pointOnAdd=JSON.parse(localStorage.getItem('pointOnAdd'));
               var numberOnAdd = 0;
               pointOnAdd.numberOfTask++;
               
               numberOnAdd+= parseInt(taskdata.priority);
               if(taskdata.dayleft<5)
               numberOnAdd +=1 ;
               else if(taskdata.dayleft<10)
               numberOnAdd+= 2;
               else if(taskdata.dayleft<15)
               numberOnAdd += 3;
               else if(taskdata.dayleft<30)
               numberOnAdd += 4;
               else 
               numberOnAdd += 5;
               
               if(pointOnAdd.numberOfTask<10)
               numberOnAdd+=1 ;
               else if(pointOnAdd.numberOfTask<30)
               numberOnAdd+=2 ;
               else if(pointOnAdd.numberOfTask<50)
               numberOnAdd+=3 ;
               else if(pointOnAdd.numberOfTask<100)
               numberOnAdd+=4 ;
               else if(pointOnAdd.numberOfTask<500)
               numberOnAdd+=5 ;
               else
               numberOnAdd+=6 ;
               
               
               
               
               	
               
               
               if(pointOnAdd.addPointPercentage==0)
               pointOnAdd.addPointPercentage = (numberOnAdd/14)*100;
               else
               pointOnAdd.addPointPercentage = (pointOnAdd.addPointPercentage+(numberOnAdd/14)*100)/2;
               
               
               localStorage.setItem("pointOnAdd",JSON.stringify(pointOnAdd));
              
          
          
          }
       </script>
    
    
  </body>
</html>
